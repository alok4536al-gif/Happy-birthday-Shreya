<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cinematic Train Intro</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{
  height:100%;
  background:#000;
  overflow:hidden;
  font-family:'Segoe UI',sans-serif;
  color:#fff;
  text-align:center;
}

/* Typing lines */
.line{
  font-size:2.2rem;
  margin:15px 0;
  white-space:nowrap;
  border-right:2px solid #fff;
  display:inline-block;
}

/* Portal ring */
.portal{
  position:absolute;
  top:60%;left:50%;
  width:320px;height:320px;
  transform:translate(-50%,-50%);
  border-radius:50%;
  border:4px solid rgba(255,180,0,0.8);
  box-shadow:0 0 40px #ffae00, inset 0 0 40px #ff6a00;
  opacity:0;
  animation:spin 8s linear infinite;
}
@keyframes spin{
  0%{transform:translate(-50%,-50%) rotate(0deg);}
  100%{transform:translate(-50%,-50%) rotate(360deg);}
}

/* Train with 3-D depth */
.train{
  position:absolute;
  top:60%;left:50%;
  width:300px;
  opacity:0;
  transform:perspective(1000px) translate(-50%,-50%) translateZ(-800px) scale(0.1);
  transition:transform 15s ease-in-out, opacity 15s ease-in-out;
}

/* Background collage */
.bg{
  position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:url('photo11.jpg') center/cover no-repeat;
  opacity:0;
  filter:brightness(0.4);
  transition:opacity 12s ease-in-out;
}

/* Fade overlay */
#fadeOut{
  position:fixed;
  top:0;left:0;width:100%;height:100%;
  background:#000;
  opacity:0;
  pointer-events:none;
  transition:opacity 6s ease-in-out;
}
</style>
</head>
<body>

<!-- Typing container -->
<div id="typingBox" style="position:absolute;top:30%;left:50%;transform:translateX(-50%);">
  <div class="line" id="line1"></div>
  <div class="line" id="line2"></div>
  <div class="line" id="line3"></div>
</div>

<!-- Portal + Train -->
<div class="portal" id="portal"></div>
<img src="trainFront.jpg" class="train" id="train" alt="train">

<!-- Background collage -->
<div class="bg" id="bg"></div>

<!-- Fade overlay -->
<div id="fadeOut"></div>

<!-- Dummy audio -->
<audio id="introAudio" src="intro.mp3"></audio>

<script>
const lines = [
  "Itâ€™s time to",
  "board the train",
  "of memories"
];
const ids = ["line1","line2","line3"];
let currentLine = 0;
let charIndex = 0;

function playAudio(){
  const audio = document.getElementById('introAudio');
  audio.play().catch(()=>{
    document.body.addEventListener('click',()=>audio.play(),{once:true});
  });
}

function typeLine(){
  if(currentLine < lines.length){
    const el = document.getElementById(ids[currentLine]);
    if(charIndex < lines[currentLine].length){
      el.textContent += lines[currentLine].charAt(charIndex);
      charIndex++;
      setTimeout(typeLine,100);
    }else{
      // line done
      el.style.borderRight='none';
      currentLine++;
      charIndex=0;
      setTimeout(typeLine,800);
    }
  }else{
    setTimeout(startPortal,1500);
  }
}
typeLine();

function startPortal(){
  playAudio();
  document.getElementById('portal').style.opacity='1';

  setTimeout(()=>{
    const train=document.getElementById('train');
    train.style.opacity='1';
    train.style.transform=
      'perspective(1000px) translate(-50%,-50%) translateZ(300px) scale(1.4)';
    const bg=document.getElementById('bg');
    bg.style.opacity='1';

    setTimeout(()=>{
      document.getElementById('fadeOut').style.opacity='1';
      setTimeout(()=>{ window.location.href='memories.html'; },6000);
    },12000);
  },2000);
}
</script>

</body>
</html>
